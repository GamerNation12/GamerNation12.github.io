<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
  <title>status</title>
  <link rel="icon" type="image/x-icon" href="https://cdn.discordapp.com/avatars/821763511281123444/6b6f2076e121f860fd540729ec91171c.webp?size=80">
  <meta name="description" content="loerex">
  <meta name="keywords" content="loerex">
  <meta content="minecraft gamer nations website" property="og:title">
  <meta content="find out about me!" property="og:description">
  <meta content="find out about me!" property="og:url">
  <meta name="theme-color" content="#ff8400">
</head>

<body>
  <div id="container">
    <div class="clockContainer">
      <div class="clockTimezone"></div>
      <div class="clock"></div>
    </div>
    <div class="center">
      <p class="nameMain">
        <span id="nameNeksio" class="nameNeksio"></span>
      </p><div class="gap"></div>
      <div class="panel discordPanel" style="position:relative;display:flex;align-items:center;gap:1em;background:#23272a;padding:1em 2em;border-radius:12px;max-width:450px;justify-content:space-between;">
        <div style="display:flex;align-items:center;gap:1em;">
          <div style="position:relative;">
            <a id="avatarLink" target="_blank" href="https://discord.com/users/759433582107426816">
              <img
                class="discordAvatar"
                id="discordAvatar"
                src="https://cdn.discordapp.com/embed/avatars/0.png"
                alt="Discord Avatar"
                style="width:64px;height:64px;border-radius:50%;border:2px solid #5865f2;object-fit:cover;background:#23272a;"
              >
              <!-- Status indicator with tooltip -->
              <span id="discordStatusDot" style="position:absolute;bottom:6px;right:6px;width:16px;height:16px;background:#747f8d;border:2px solid #23272a;border-radius:50%;display:block;z-index:2;cursor:pointer;" title=""></span>
            </a>
          </div>
          <div>
            <p class="discordName" id="discordName" style="color:#fff;font-weight:bold;font-size:1.2em;margin:0;">Loading...</p>
            <!-- Status text removed from here -->
          </div>
        </div>
        <ul class="social-icons list-unstyled list-inline" style="display:flex;gap:0.7em;align-items:center;margin:0;">
          <li style="list-style:none;"><a target="_blank" href="https://www.youtube.com/c/MinecraftGamerNation0"><i class="fa-brands fa-youtube" style="color: #FF0033;font-size:1.5em;"></i></a></li>
          <li style="list-style:none;"><a target="_blank" href="https://www.roblox.com/users/3380857326/profile"><i class="fa-solid fa-gamepad fa-lg" style="color: #ffffff;font-size:1.3em;"></i></a></li>
          <li style="list-style:none;"><a target="_blank" href="mailto:Minecraft-Gamer-Nation@post.com"><i class="fa-solid fa-envelope fa-xl" style="color: #ffffff;font-size:1.3em;"></i></a></li>
        </ul>
      </div>
      <div class="gap"></div>
      <div class="panel spotifyPanel">
        <i class="spotify fa-brands fa-spotify"></i>
        <a id="trackLink" target="_blank" href="gamernation12.github.io/status"><img class="trackImg" id="trackImg" src="null"></a>
        <p class="trackName" id="trackName">Nothing</p>
        <p class="trackArtist" id="trackArtist">
          I'm not currently listening anything
        </p>
      </div>
      <div class="gap"></div>
      <div id="rpcPanel" class="panel rpcPanel">
        <i class="game fa-solid fa-gamepad"></i>
        <img class="rpcIcon" id="rpcIcon" src="game.png">
        <p class="rpcName" id="rpcName">None</p>
        <p class="rpcDetails" id="rpcDetails">
          I'm not currently playing anything
        </p>
      </div>
    </div>
  </div>

  <script src="js/script.js"></script>
  <script>
    const gradients = [
      "#004ef7, #0084ff",
      "#ff8400, #ffc900",
      "#660acf, #ac00cf",
    ];
    const chosenGradient = gradients[Math.floor(Math.random() * gradients.length)];
    const nameNeksio = document.getElementById("nameNeksio");
    nameNeksio.style.backgroundImage = `linear-gradient(to right, ${chosenGradient})`;
  </script>
  <script>
    // Lanyard API integration
    const DISCORD_USER_ID = "759433582107426816";
    const lanyardUrl = `https://api.lanyard.rest/v1/users/${DISCORD_USER_ID}`;

    function getStatusColor(status) {
      switch (status) {
        case "online": return "#43b581";
        case "idle": return "#faa61a";
        case "dnd": return "#f04747";
        case "offline": return "#747f8d";
        default: return "#747f8d";
      }
    }

    function getStatusText(status) {
      switch (status) {
        case "online": return "Online";
        case "idle": return "Idle";
        case "dnd": return "Do Not Disturb";
        case "offline": return "Offline";
        default: return "Unknown";
      }
    }

    fetch(lanyardUrl)
      .then(res => res.json())
      .then(data => {
        if (!data.success) return;
        const user = data.data.discord_user;
        const status = data.data.discord_status;
        const avatar = user.avatar
          ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.webp?size=80`
          : `https://cdn.discordapp.com/embed/avatars/${parseInt(user.discriminator) % 5}.png`;

        document.getElementById("discordAvatar").src = avatar;
        document.getElementById("discordName").textContent = user.username;
        // Set status dot color and tooltip
        const statusDot = document.getElementById("discordStatusDot");
        statusDot.style.background = getStatusColor(status);
        statusDot.title = getStatusText(status);
        document.getElementById("avatarLink").href = `https://discord.com/users/${user.id}`;
      })
      .catch(() => {
        document.getElementById("discordName").textContent = "Unavailable";
        const statusDot = document.getElementById("discordStatusDot");
        statusDot.style.background = "#747f8d";
        statusDot.title = "Offline";
      });
  </script>
</body>

</html>
